<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login com Tonkeeper</title>
  <link rel="stylesheet" href="src/styles/styles.css">
</head>
<body>
  <div class="container">
    <h1>Conectar com Tonkeeper</h1>
    <button id="connectBtn">Conectar Carteira</button>
    <!--<div id="connect"></div>-->
    <p id="status">Status: Aguardando conex√£o...</p>
  </div>
  <script type="module" src="src/controllers/loginController.js"></script>

  <!--<script type="module">
    import { TonConnectUI } from "@tonconnect/ui";
    import { toUserFriendlyAddress } from "@tonconnect/sdk";

    // 1Ô∏è‚É£ Crie a inst√¢ncia com o caminho do seu manifest
    const tonConnectUI = new TonConnectUI({
      manifestUrl: "https://wsw-dev-hub.github.io/tonkeeper-from/public/tonconnect-manifest.json",
      buttonRootId: "connect",  // ‚úÖ cria automaticamente o bot√£o nessa div
      uiPreferences: { theme: "SYSTEM" }
    });

    // 2Ô∏è‚É£ Renderiza o bot√£o de conex√£o automaticamente
    tonConnectUI.uiOptions = {
      walletsList: { includeWallets: ["tonkeeper"] } // opcional
    };

    const out = (msg) => document.getElementById('status').textContent = msg;

     // 2Ô∏è‚É£ Observa mudan√ßas de conex√£o
    tonConnectUI.onStatusChange((walletInfo) => {
      if (walletInfo && walletInfo.account) {
        // RAW address (hexadecimal)
        const raw = walletInfo.account.address;
        //const friendly = walletInfo.account.address;
        // Converter para formato amig√°vel (base64-url)
        // ‚úÖ Converte para endere√ßo amig√°vel Base64URL (sem Buffer errors)
        const friendly = toUserFriendlyAddress(raw, true); // true = testnet

        out(`‚úÖ Conectado! Raw: ${raw} Friendly: ${friendly}`);
      } else {
        out("üîå Wallet desconectada ou n√£o detectada.");
      }
    });

    //tonConnectUI.renderButton("#connect"); 
    // 3Ô∏è‚É£ Log de debug opcional
    console.log("TonConnectUI inicializado", tonConnectUI);
  </script>-->
</body>
</html>